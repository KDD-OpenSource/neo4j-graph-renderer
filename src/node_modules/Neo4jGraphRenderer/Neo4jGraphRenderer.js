import React, { Component } from 'react';
import { createGraph } from './assets/graph';
import './Neo4jGraphRenderer.css';

class Neo4JGraphRenderer extends Component {
  componentDidMount() {
    this.loadData(this.props);
  }

  componentWillReceiveProps(newProps) {
    this.loadData(newProps);
  }

  loadData(props) {
    const connection = { url: props.url, user: props.user, pass: props.password };
    createGraph(connection, props.query, props.onClick, props.divId);
  }



  render () {
    const id = "graph-" + this.props.divId.toString();
    return <div id={id}/>;
  }
}

Neo4JGraphRenderer.defaultProps =  {
    onClick:()=>{}
};
export default Neo4JGraphRenderer;
